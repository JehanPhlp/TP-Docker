FROM node:24-alpine
RUN adduser -S tp2 
USER tp2
WORKDIR /app
COPY package*.json ./
RUN npm ci --omit=dev
COPY server.js ./
EXPOSE 3000 4000 5000
ENV NODE_ENV=production
RUN npm run build
CMD ["node", "server.js"]